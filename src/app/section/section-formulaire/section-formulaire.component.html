<mat-horizontal-stepper [linear]="true" labelPosition="bottom" #stepper>

  <mat-step [stepControl]="firstFormGroup">
    <form [formGroup]="firstFormGroup">
      <ng-template matStepLabel>Sélection des fichiers à traiter</ng-template>
      <div>
        <label for="inputFileVemgsa">Sélectionner le fichier Vemgsa a traiter </label>
        <input type="file" required multiple #vemgsaFile (change)="updateSelectedVemgsa(vemgsaFile.files)" />
      </div>
      <div>
        <label for="inputFileLpln">Sélectionner le fichier Lpln a traiter</label>
        <input type="file" #lplnFile (change)="updateSelectedLpln(lplnFile.files[0])" />
      </div>
      <div *ngIf="!isFichier">
        Champ obligatoire !
      </div>
      <div *ngIf="isFileSelected">
        <button mat-button matStepperNext (click)="uploadFiles()">Next</button>
      </div>
    </form>
  </mat-step>


  <mat-step [stepControl]="secondFormGroup">
    <form [formGroup]="secondFormGroup">
      <ng-template matStepLabel>Identifiant du vol</ng-template>
      <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
        [(ngModel)]="identifiantSelectionne" [ngModelOptions]="{standalone: true}">
        <mat-radio-button *ngFor="let id of identifiants" [value]="id">
          {{id}}
        </mat-radio-button>
      </mat-radio-group>
      <div>Vous avez choisi de rentre le : {{identifiantSelectionne}}

      </div>
      <div *ngIf="isPlnid">
        <mat-form-field>
          <input matInput placeholder="Rentrez l'identifiant plnid" [formControl]="plnid" required>
          <mat-error *ngIf="plnid.invalid">{{getErrorMessagePlnid()}}</mat-error>
        </mat-form-field>
      </div>

      <div>
        <mat-form-field *ngIf="isArcid">
          <input matInput placeholder="Rentrez l'identifiant arcid" [formControl]="arcid" required>
          <mat-error *ngIf="arcid.invalid">{{getErrorMessageArcid()}}</mat-error>
        </mat-form-field>
      </div>
      <div *ngIf="arcid.invalid && plnid.invalid">
        <button mat-button matStepperPrevious>Back</button>
      </div>
      <div *ngIf="!(arcid.invalid && plnid.invalid)">
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext (click)="analyseDataInput()">Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    You are now done.
    <div *ngIf="isCheckKO">
      <label for="isCheckKO">Check nok : {{getError()}} </label>
    </div>
    <div *ngIf="isCheckOK">
        <label for="isCheckOK">Check ok : {{getArcidTrouve()}} {{getPlnidTrouve()}} </label>
        
  
      </div>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button (click)="lplnFile.value = '';vemgsaFile.value = ''; initFormulaire();stepper.reset()">Reset</button>
        <button *ngIf="true" mat-raised-button color="primary" (click)=analyseFiles()>"analyse"</button>
    </div>
  </mat-step>
</mat-horizontal-stepper>